# 現地チェックシートアプリ（Webプロトタイプ）

不動産物件の不具合検査を行うWebアプリケーションのプロトタイプです。
お客様とのすり合わせ後、Androidアプリとして実装予定です。

## 技術スタック

- **フロントエンド**: React 18 + TypeScript
- **ビルドツール**: Vite
- **ルーティング**: React Router
- **スタイリング**: TailwindCSS
- **データ保存**: LocalStorage（ブラウザローカル）
- **カメラ機能**: WebカメラAPI
- **図面機能**: Canvas API

## セットアップ

```bash
# 依存パッケージのインストール
npm install

# 開発サーバーの起動
npm run dev

# ビルド
npm run build

# プレビュー
npm run preview
```

## ログイン情報

以下の2つの固定アカウントでログイン可能です：

- **ユーザー1**: `user1` / `password1`
- **ユーザー2**: `user2` / `password2`

## 主な機能

### 1. ログイン機能
- 固定2アカウントによる認証

### 2. 物件管理
- 物件の登録・一覧表示・削除
- 物件情報（名前、住所）の管理
- データエクスポート機能

### 3. 階層管理
- 各物件に対する階層（1F、2F、屋上など）の登録・管理

### 4. 図面管理
- 各階層に対する図面画像の取り込み
- 図面の表示・削除

### 5. 検査機能
- 図面上をタップして撮影箇所を指定
- 検査情報の入力（大分類、中分類、小分類、検査結果）
- 検査結果に応じた分岐処理：
  - **a/b1**: 撮影不要（マーカーのみ保存）
  - **b2/c**: 撮影が必要

### 6. 不具合記録
- カメラによる撮影
- 不具合情報の記入（場所、部位、劣化状況、補修方法）
- 撮影した画像の保存
- **不具合一覧の表示**
- **不具合の編集・削除**
- **画像の再撮影**

### 7. 参考画像
- 不具合以外の参考画像の撮影
- メモの追加・編集
- 参考画像一覧の表示・削除

### 8. データ管理
- すべてのデータはLocalStorageに保存
- 物件単位でのデータエクスポート（JSON形式）

## 画面遷移フロー

```
ログイン
  ↓
物件一覧
  ↓
物件詳細
  ↓
階層管理
  ↓
図面管理
  ↓
図面表示（メイン画面）
  ↓
検査情報入力
  ↓ (b2/c選択時)
撮影
  ↓
不具合記入
  ↓
図面表示（戻る）
```

## 使用方法

### 基本的な流れ

1. **ログイン**
   - テストアカウントでログイン

2. **物件の登録**
   - 物件一覧から「新規物件追加」をクリック
   - 物件名と住所を入力

3. **階層の追加**
   - 物件詳細画面で「階層追加」をクリック
   - 階層名（例: 1F、2F）を入力

4. **図面の取り込み**
   - 階層を選択して図面管理画面へ
   - 「図面を追加」から画像ファイルを選択

5. **検査の実施**
   - 図面表示画面で図面上をタップ
   - 検査情報（大分類、中分類、小分類、検査結果）を入力
   - b2/cの場合は撮影と不具合記入を実施

6. **参考画像の撮影**
   - 図面表示画面の右上「参考画像撮影」ボタンから撮影
   - メモを追加して保存

7. **不具合一覧の確認と管理**
   - 図面表示画面の右上「不具合一覧」ボタンから一覧を表示
   - 各不具合をタップして詳細を確認
   - 不具合情報の編集・削除
   - 画像の再撮影も可能

8. **データのエクスポート**
   - 物件詳細画面の「データエクスポート」ボタンでJSON形式でダウンロード

## 開発時の注意点

### カメラ機能について
- カメラ機能はHTTPSまたはlocalhostでのみ動作します
- モバイルデバイスでテストする場合は、HTTPSでホストする必要があります

### データの永続化
- LocalStorageを使用しているため、ブラウザのデータをクリアするとすべてのデータが消えます
- 重要なデータは定期的にエクスポートしてください

### 画像について
- 画像はBase64形式でLocalStorageに保存されます
- LocalStorageには容量制限（通常5-10MB）があるため、大量の画像を保存する場合は注意が必要です

## 今後の展開

このWebプロトタイプでお客様とのすり合わせを行い、以下を実装予定：

1. **Androidアプリ化**
   - React NativeまたはKotlinでのネイティブ実装
   - オフライン完全対応
   - USB経由でのデータ取り出し機能

2. **機能の追加・改善**
   - お客様からのフィードバックを反映
   - UI/UXの改善
   - データ形式の最適化

## ライセンス

非公開プロジェクト
